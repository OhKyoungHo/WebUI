<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<script type="text/javascript">
//----------------------------------------------------------
// 4. 지역변수를 참조하는 함수 안에 함수 클로저(closure)		
//			전역변수는 특정 함수 몇 개만 공유하지 못하고 전체가 공유하는 변수이다.
//			클로저는 특정 함수가 암묵적으로 다른 함수의 참조를 가지고 있기 때문에
//			호출되는 함수가 참조하는 함수의 메모리 공간을 참조한다. (?)
//			아무튼 클로저를 이용하여 전역변수의 사용을 줄일 수 있다

 //------ 함수 선언
function add(a,b,c){
	var result = a + b;//지역변수
	c(result); 
	return function(){
						result++;
						return '공유결과?' +result;
						};//지역변수 result를 특정 함수들이 공유
}
// 글로벌변수로 지정하면 모든 함수들이 공유가능ㄴ9
// 특정함수들만 사용할수 있도록 지역변수로 설정 및 클로저 이용
// 클로저 : 어떤 함수가 자신의 내부가 아닌 외부에서 선언된 변수에 접근하는 것을 뜻합니다.
// 함수가 자신의 밖에서 선언된 변수에 접근하는 것
// 신을 포함하고 있는 외부함수보다 내부함수가 더 오래 유지되는 경우, 
// 외부 함수 밖에서 내부함수가 호출되더라도 외부함수의 지역 변수에 접근할 수 있는데 이러한 함수를 클로저(Closure)
// 외부함수가 이미 반환되었어도 외부함수 내의 변수는 이를 필요로 하는 내부함수가 하나 이상 존재하는 경우 계속 유지된다. 
// 이때 내부함수가 외부함수에 있는 변수의 복사본이 아니라 실제 변수에 접근한다는 것에 주의

//------ 함수 호출
//함수의 인자로 다른 함수안에 들어갈 수있다.
var resultVar = add(10,20,function(res){
								document.write('결과:'+ res +'<br/>')
						}); 
document.write('리턴 결과 :' + resultVar()+'<hr/>');//31
document.write('리턴 결과 :' + resultVar()+'<hr/>');//32
document.write('리턴 결과 :' + resultVar()+'<hr/>');//33
result=100000;
document.write('리턴 결과 :' + resultVar()+'<hr/>');//34
		




</script>
</head>
<body>

</body>
</html>